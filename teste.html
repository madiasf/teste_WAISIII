import React, { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Progress } from "@/components/ui/progress";

const questions = [
  {
    id: 1,
    category: "Compreens√£o Verbal",
    question: "O que significa ‚Äòamb√≠guo‚Äô?",
    options: [
      "Claro e direto",
      "Com dois sentidos",
      "Errado",
      "R√°pido e breve"
    ],
    answer: 1
  },
  {
    id: 2,
    category: "Racioc√≠nio Perceptual",
    question: "Qual figura completa a sequ√™ncia: ‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è ?",
    options: ["‚óºÔ∏è", "‚óªÔ∏è", "üî≥", "‚¨õ"],
    answer: 0
  },
  {
    id: 3,
    category: "Mem√≥ria de Trabalho",
    question: "Repita os n√∫meros: 3 - 8 - 1 - 6",
    options: ["3-8-1-6", "6-1-8-3", "1-3-6-8", "3-1-6-8"],
    answer: 0
  },
  {
    id: 4,
    category: "Velocidade de Processamento",
    question: "Qual s√≠mbolo est√° repetido?  ‚¨§ ‚óØ ‚¨§ ‚óã",
    options: ["‚¨§", "‚óØ", "‚óã", "Todos"],
    answer: 0
  }
];

export default function WaisSimulator() {
  const [step, setStep] = useState(0);
  const [score, setScore] = useState(0);
  const [name, setName] = useState("");

  const handleAnswer = (index) => {
    if (index === questions[step].answer) {
      setScore(score + 1);
    }
    setStep(step + 1);
  };

  if (step >= questions.length) {
    const percentage = Math.round((score / questions.length) * 100);
    return (
      <div className="max-w-xl mx-auto mt-10 p-4 text-center">
        <h2 className="text-2xl font-bold mb-4">Resultado de {name}</h2>
        <p className="text-lg mb-4">Pontua√ß√£o: {score} de {questions.length}</p>
        <p className="text-xl font-semibold">Estimativa de QI Simulado: {90 + score * 5}</p>
        <Progress value={percentage} className="mt-4" />
      </div>
    );
  }

  if (step === 0 && !name) {
    return (
      <div className="max-w-md mx-auto mt-10 p-4">
        <h1 className="text-2xl font-bold mb-4">Simulador de QI - WAIS III (Did√°tico)</h1>
        <Input
          placeholder="Digite seu nome"
          onChange={(e) => setName(e.target.value)}
          className="mb-4"
        />
        <Button onClick={() => setStep(1)}>Come√ßar</Button>
      </div>
    );
  }

  const current = questions[step];

  return (
    <div className="max-w-xl mx-auto mt-10 p-4">
      <Card>
        <CardContent className="p-6">
          <h2 className="text-xl font-semibold mb-2">{current.category}</h2>
          <p className="text-lg mb-4">{current.question}</p>
          <div className="space-y-2">
            {current.options.map((opt, idx) => (
              <Button key={idx} variant="outline" className="w-full" onClick={() => handleAnswer(idx)}>
                {opt}
              </Button>
            ))}
          </div>
          <Progress value={(step / questions.length) * 100} className="mt-4" />
        </CardContent>
      </Card>
    </div>
  );
}
